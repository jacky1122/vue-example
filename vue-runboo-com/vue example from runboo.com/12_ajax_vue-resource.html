<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>Ajax(vue-resource)</title>
		<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
		<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
	</head>
	<body>
		<!--
		1、Ajax(vue-resource)
		要事项异步加载需要使用到vue-resource库
		Get请求
		-->
		<div id="box">
			<input type="button" @click="get()" value="点击我异步获取数据(Get)">
		</div>
		<script type="text/javascript">
			//window.onload=function(){
				var vm = new Vue({
					el: '#box', 
					data: {
						msg: 'Hello world!'
					},
					methods: {
						get: function(){
							this.$http.get('11_mixin.html')
								.then(function(res){
									document.write(res.body)
								}, function(){
									console.log('请求失败处理')
								})
						}
					}
				})
			//}
		</script>
		<!--
		2、参数传递
		如果需要传递数据，可以使用this.$http.get('get.php', {params: jsonData})格式，
		第二个参数jsonData就是传导后端的数据
		-->
		<!--
		3、POS请求
		post发送数据到后端，需要第三个参数{emulateJSON: true}
		emulateJSON的作用：如果web服务器无法处理编码为application/json的请求，可以启用emulateJSON选项
		-->
		<div id="box2">
			<input type="button" @click="post()" value="点我异步获取数据(post)">
		</div>
		<script type="text/javascript">
			var vm2 = new Vue({
				el: '#box2', 
				data:{
					msg: "Hello world!!!",
				},
				methods: {
					post: function(){
						this.$http.post("11_mixin.html", {name: "Hello world", url: "http://www.runoob.com"}, 
							{enumateJSON:true})
							.then(function(res){
								document.write(res.body)
							}, function(res){
								console.log(res.status)
							})
					}
				}
			})
		</script>
	</body>
</html>
